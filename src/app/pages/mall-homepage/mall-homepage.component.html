<!-- Mall Homepage Template -->
<div class="mall-homepage rtl-layout" dir="rtl">
  
  <!-- Header Section -->
  <header class="header-section">
    <nav class="navbar">
      <div class="container">
        <div class="nav-content">
          <!-- Logo -->
          <div class="logo">
            <img src="/assets/images/mall-logo.png" alt="مال - فروشگاه‌ساز" class="logo-img">
            <span class="logo-text">مال</span>
          </div>
          
          <!-- Navigation Menu -->
          <div class="nav-menu">
            <a href="#features" (click)="scrollToSection('features')" class="nav-link">امکانات</a>
            <a href="#pricing" (click)="scrollToSection('pricing')" class="nav-link">تعرفه</a>
            <a href="#about" (click)="scrollToSection('about')" class="nav-link">درباره ما</a>
            <a href="#contact" (click)="scrollToSection('contact')" class="nav-link">تماس</a>
          </div>
          
          <!-- Action Buttons -->
          <div class="nav-actions">
            <button class="btn btn-outline" (click)="navigateToLogin()" *ngIf="!isUserAuthenticated()">ورود</button>
            <button class="btn btn-outline" (click)="navigateToDashboard()" *ngIf="isUserAuthenticated()">پنل مدیریت</button>
            <button class="btn btn-primary" (click)="openRequestModal()">شروع کنید</button>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-background">
      <div class="hero-overlay"></div>
      <div class="hero-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
      </div>
    </div>
    
    <div class="container">
      <div class="hero-content">
        <div class="hero-text" data-aos="fade-up">
          <h1 class="hero-title">
            <span class="gradient-text">فروشگاه‌ساز مال</span>
            <br>
            آینده تجارت الکترونیک
          </h1>
          <p class="hero-description">
            با پلتفرم پیشرفته مال، فروشگاه آنلاین خود را در کمترین زمان راه‌اندازی کنید. 
            امکانات کامل، طراحی مدرن و پشتیبانی ۲۴ ساعته در خدمت شماست.
          </p>
          
          <!-- CTA Buttons -->
          <div class="hero-actions">
            <button class="btn btn-primary btn-large" (click)="openRequestModal()">
              <i class="fas fa-rocket"></i>
              شروع رایگان
            </button>
            <button class="btn btn-secondary btn-large" (click)="navigateToDemo()">
              <i class="fas fa-play"></i>
              مشاهده دمو
            </button>
          </div>
        </div>
        
        <div class="hero-visual" data-aos="fade-left">
          <div class="hero-image">
            <img src="/assets/images/hero-dashboard.png" alt="پنل مدیریت فروشگاه" class="dashboard-img">
            <div class="floating-cards">
              <div class="card card-stats" data-aos="zoom-in" data-aos-delay="200">
                <div class="card-icon">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="card-info">
                  <span class="card-number">۲۵۰%</span>
                  <span class="card-label">افزایش فروش</span>
                </div>
              </div>
              
              <div class="card card-notification" data-aos="zoom-in" data-aos-delay="400">
                <div class="card-icon">
                  <i class="fas fa-bell"></i>
                </div>
                <div class="card-info">
                  <span class="card-title">سفارش جدید!</span>
                  <span class="card-subtitle">محصول شماره #۱۲۳۴</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Stats Section -->
  <section class="stats-section">
    <div class="container">
      <div class="stats-grid" *ngIf="!isLoadingStats">
        <div class="stat-item" *ngFor="let stat of stats" data-aos="fade-up">
          <div class="stat-number">{{ stat.number }}</div>
          <div class="stat-label">{{ stat.label }}</div>
        </div>
      </div>
      <div class="stats-loading" *ngIf="isLoadingStats">
        <i class="fas fa-spinner fa-spin"></i>
        <span>در حال بارگذاری آمار...</span>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section id="features" class="features-section">
    <div class="container">
      <div class="section-header" data-aos="fade-up">
        <h2 class="section-title">امکانات پیشرفته</h2>
        <p class="section-description">
          تمام ابزارهای مورد نیاز برای راه‌اندازی و مدیریت فروشگاه آنلاین موفق
        </p>
      </div>
      
      <div class="features-grid">
        <div class="feature-card" *ngFor="let feature of features; let i = index" 
             data-aos="fade-up" [attr.data-aos-delay]="i * 100">
          <div class="feature-image">
            <img [src]="feature.image" [alt]="feature.title" class="feature-img">
            <div class="feature-overlay">
              <i class="fas {{ feature.icon }}"></i>
            </div>
          </div>
          <div class="feature-content">
            <h3 class="feature-title">{{ feature.title }}</h3>
            <p class="feature-description">{{ feature.description }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section (Middle) -->
  <section class="cta-section cta-middle">
    <div class="cta-background">
      <div class="cta-overlay"></div>
    </div>
    <div class="container">
      <div class="cta-content" data-aos="zoom-in">
        <h2 class="cta-title">آماده شروع هستید؟</h2>
        <p class="cta-description">
          همین امروز فروشگاه آنلاین خود را راه‌اندازی کنید و از مزایای تجارت الکترونیک بهره‌مند شوید
        </p>
        <button class="btn btn-white btn-large" (click)="openRequestModal()">
          <i class="fas fa-store"></i>
          ایجاد فروشگاه
        </button>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="contact-section">
    <div class="container">
      <div class="contact-content">
        <div class="contact-info" data-aos="fade-right">
          <h2 class="contact-title">با ما در تماس باشید</h2>
          <p class="contact-description">
            تیم پشتیبانی ما آماده پاسخگویی به سوالات شماست
          </p>
          
          <div class="contact-methods">
            <div class="contact-method">
              <i class="fas fa-phone"></i>
              <span>۰۲۱-۱۲۳۴۵۶۷۸</span>
            </div>
            <div class="contact-method">
              <i class="fas fa-envelope"></i>
              <span>info@mall.ir</span>
            </div>
            <div class="contact-method">
              <i class="fas fa-map-marker-alt"></i>
              <span>تهران، خیابان ولیعصر</span>
            </div>
          </div>
        </div>
        
        <div class="contact-form-container" data-aos="fade-left">
          <button class="btn btn-primary btn-large btn-block" (click)="openContactModal()">
            <i class="fas fa-comments"></i>
            ارسال پیام
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA Section -->
  <section class="cta-section cta-final">
    <div class="container">
      <div class="cta-content" data-aos="zoom-in">
        <h2 class="cta-title">همین حالا شروع کنید</h2>
        <p class="cta-description">
          فرصت طلایی برای ورود به دنیای تجارت الکترونیک را از دست ندهید
        </p>
        <div class="cta-actions">
          <button class="btn btn-primary btn-large" (click)="openRequestModal()">
            <i class="fas fa-rocket"></i>
            شروع رایگان
          </button>
          <button class="btn btn-outline btn-large" (click)="navigateToLogin()" *ngIf="!isUserAuthenticated()">
            <i class="fas fa-sign-in-alt"></i>
            ورود به پنل
          </button>
          <button class="btn btn-outline btn-large" (click)="navigateToDashboard()" *ngIf="isUserAuthenticated()">
            <i class="fas fa-tachometer-alt"></i>
            پنل مدیریت
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer-section">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="logo">
            <img src="/assets/images/mall-logo-white.png" alt="مال" class="logo-img">
            <span class="logo-text">مال</span>
          </div>
          <p class="footer-description">
            پلتفرم پیشرفته فروشگاه‌سازی برای کسب‌وکارهای ایرانی
          </p>
        </div>
        
        <div class="footer-links">
          <div class="footer-column">
            <h4 class="footer-title">خدمات</h4>
            <ul class="footer-list">
              <li><a href="#" class="footer-link">ساخت فروشگاه</a></li>
              <li><a href="#" class="footer-link">طراحی قالب</a></li>
              <li><a href="#" class="footer-link">درگاه پرداخت</a></li>
              <li><a href="#" class="footer-link">ارسال کالا</a></li>
            </ul>
          </div>
          
          <div class="footer-column">
            <h4 class="footer-title">پشتیبانی</h4>
            <ul class="footer-list">
              <li><a href="#" class="footer-link">راهنمای استفاده</a></li>
              <li><a href="#" class="footer-link">سوالات متداول</a></li>
              <li><a href="#" class="footer-link" (click)="openContactModal()">تماس با ما</a></li>
              <li><a href="#" class="footer-link">گزارش مشکل</a></li>
            </ul>
          </div>
          
          <div class="footer-column">
            <h4 class="footer-title">شرکت</h4>
            <ul class="footer-list">
              <li><a href="#" class="footer-link">درباره ما</a></li>
              <li><a href="#" class="footer-link">تیم ما</a></li>
              <li><a href="#" class="footer-link">فرصت‌های شغلی</a></li>
              <li><a href="#" class="footer-link">اخبار</a></li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <div class="footer-copyright">
          <p>&copy; ۱۴۰۳ مال. تمامی حقوق محفوظ است.</p>
        </div>
        <div class="footer-social">
          <a href="#" class="social-link"><i class="fab fa-telegram"></i></a>
          <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
          <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
        </div>
      </div>
    </div>
  </footer>
</div>

<!-- Modals -->
<!-- Contact Modal -->
<div class="modal" [class.active]="showContactModal" (click)="closeContactModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3 class="modal-title">تماس با ما</h3>
      <button class="modal-close" (click)="closeContactModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="submitContactForm()" (keypress)="onFormKeyPress($event, 'contact')">
        <div class="form-group">
          <label class="form-label">نام *</label>
          <input 
            type="text" 
            [(ngModel)]="contactForm.name" 
            name="name" 
            class="form-input"
            [class.error]="contactFormErrors.name"
            required
            placeholder="نام خود را وارد کنید">
          <div class="form-error" *ngIf="contactFormErrors.name">
            {{ contactFormErrors.name }}
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">شماره تلفن *</label>
          <input 
            type="tel" 
            [(ngModel)]="contactForm.phone" 
            name="phone" 
            class="form-input"
            [class.error]="contactFormErrors.phone"
            (input)="formatPhoneNumber($event, 'contact')"
            placeholder="۰۹۱۲ ۳۴۵ ۶۷۸۹"
            required>
          <div class="form-error" *ngIf="contactFormErrors.phone">
            {{ contactFormErrors.phone }}
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">ایمیل (اختیاری)</label>
          <input 
            type="email" 
            [(ngModel)]="contactForm.email" 
            name="email" 
            class="form-input"
            [class.error]="contactFormErrors.email"
            placeholder="your@email.com">
          <div class="form-error" *ngIf="contactFormErrors.email">
            {{ contactFormErrors.email }}
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">پیام *</label>
          <textarea 
            [(ngModel)]="contactForm.message" 
            name="message" 
            class="form-textarea" 
            rows="4" 
            [class.error]="contactFormErrors.message"
            placeholder="پیام خود را بنویسید..."
            required></textarea>
          <div class="form-error" *ngIf="contactFormErrors.message">
            {{ contactFormErrors.message }}
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" (click)="closeContactModal()" [disabled]="isLoadingContact">
            انصراف
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="isLoadingContact">
            <i class="fas fa-spinner fa-spin" *ngIf="isLoadingContact"></i>
            <i class="fas fa-paper-plane" *ngIf="!isLoadingContact"></i>
            {{ isLoadingContact ? 'در حال ارسال...' : 'ارسال پیام' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Request Modal -->
<div class="modal" [class.active]="showRequestModal" (click)="closeRequestModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3 class="modal-title">درخواست راه‌اندازی فروشگاه</h3>
      <button class="modal-close" (click)="closeRequestModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="submitRequestForm()" (keypress)="onFormKeyPress($event, 'request')">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">نام کسب‌وکار *</label>
            <input 
              type="text" 
              [(ngModel)]="requestForm.businessName" 
              name="businessName" 
              class="form-input"
              [class.error]="requestFormErrors.businessName"
              placeholder="مثال: فروشگاه پوشاک آرا"
              required>
            <div class="form-error" *ngIf="requestFormErrors.businessName">
              {{ requestFormErrors.businessName }}
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">نام مالک *</label>
            <input 
              type="text" 
              [(ngModel)]="requestForm.ownerName" 
              name="ownerName" 
              class="form-input"
              [class.error]="requestFormErrors.ownerName"
              placeholder="نام و نام خانوادگی"
              required>
            <div class="form-error" *ngIf="requestFormErrors.ownerName">
              {{ requestFormErrors.ownerName }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">شماره تلفن *</label>
            <input 
              type="tel" 
              [(ngModel)]="requestForm.phone" 
              name="phone" 
              class="form-input"
              [class.error]="requestFormErrors.phone"
              (input)="formatPhoneNumber($event, 'request')"
              placeholder="۰۹۱۲ ۳۴۵ ۶۷۸۹"
              required>
            <div class="form-error" *ngIf="requestFormErrors.phone">
              {{ requestFormErrors.phone }}
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">نوع کسب‌وکار *</label>
            <select 
              [(ngModel)]="requestForm.businessType" 
              name="businessType" 
              class="form-select"
              [class.error]="requestFormErrors.businessType"
              required>
              <option value="">انتخاب کنید</option>
              <option *ngFor="let type of businessTypes" [value]="type.value">
                {{ type.label }}
              </option>
            </select>
            <div class="form-error" *ngIf="requestFormErrors.businessType">
              {{ requestFormErrors.businessType }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">تعداد تقریبی محصولات</label>
            <input 
              type="number" 
              [(ngModel)]="requestForm.estimatedProducts" 
              name="estimatedProducts" 
              class="form-input"
              placeholder="مثال: ۵۰"
              min="1">
          </div>

          <div class="form-group">
            <label class="form-label">وب‌سایت فعلی (اختیاری)</label>
            <input 
              type="url" 
              [(ngModel)]="requestForm.website" 
              name="website" 
              class="form-input"
              placeholder="https://example.com">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">توضیحات اضافی</label>
          <textarea 
            [(ngModel)]="requestForm.message" 
            name="message" 
            class="form-textarea" 
            rows="3"
            placeholder="توضیحات بیشتر در مورد کسب‌وکار و نیازهایتان..."></textarea>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" (click)="closeRequestModal()" [disabled]="isLoadingRequest">
            انصراف
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="isLoadingRequest">
            <i class="fas fa-spinner fa-spin" *ngIf="isLoadingRequest"></i>
            <i class="fas fa-rocket" *ngIf="!isLoadingRequest"></i>
            {{ isLoadingRequest ? 'در حال ثبت...' : 'ارسال درخواست' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Chat Widget -->
<div class="chat-widget">
  <button class="chat-toggle" (click)="toggleChat()">
    <i class="fas fa-comments"></i>
    <span class="chat-badge">آنلاین</span>
  </button>
</div>
